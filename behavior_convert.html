<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECharts 可视化</title>
    <link href="./css/style.css" type='text/css' rel="stylesheet">
    <script src="echarts.min.js"></script>
</head>

<body>
    <div class='header'>
        <p>ECharts 可视化</p>
    </div>

    <div id="main"></div>

    <script>
        var myChart = echarts.init(document.getElementById('main'));

        // 假设从数据库返回的数据
        var pv = 50;  // 点击数 (假设数据)
        var favcart = 30;  // 收藏 or 加购物车数 (假设数据)
        var buy = 20;  // 购买数 (假设数据)

        // 配置漏斗图的选项
        var option = {
            title: {
                text: '用户行为转化漏斗图'
            },
            tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b} : {c}%'
            },
            toolbox: {
                feature: {
                    dataView: { readOnly: false },
                    restore: {},
                    saveAsImage: {}
                }
            },
            legend: {
                data: ['点击', '收藏 or 加购物车', '购买']
            },
            series: [{
                name: '漏斗图',
                type: 'funnel',
                left: '10%',
                top: 60,
                bottom: 60,
                width: '80%',
                min: 0,
                max: 100,
                minSize: '0%',
                maxSize: '100%',
                sort: 'descending',
                gap: 2,
                label: {
                    show: true,
                    position: 'inside'
                },
                itemStyle: {
                    borderColor: '#fff',
                    borderWidth: 10
                },
                emphasis: {
                    label: {
                        fontSize: 25
                    }
                },
                data: [
                    { value: pv, name: '点击' },
                    { value: favcart, name: '收藏 or 加购物车' },
                    { value: buy, name: '购买' }
                ]
            }]
        };

        myChart.setOption(option);
    </script>
</body>

</html>
